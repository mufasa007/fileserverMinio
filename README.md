# fileserverMinio



## 1，功能概述

​	开发一套文件管理服务实现图片文档等小文件上传、下载、更新、预览功能！

​	主要目的还是要替代阿里云的oss服务，实现免费的博客图片查阅服务！（主要是因为我之前使用的阿里云oss服务开始收费了！！！）

​	需要我的一个mufasa.site域名可以使用一下了



## 2，构架描述

使用技术：

springBoot、minio、postgres、redis、caffeine、swagger



### 2.1，上传文件：

​	上传文件包括更新文件操作，上传文件的【操作频率相对较低】！

​	先在数据库中查询一下，是否已存在该文件，如果存在且一致，则新增索引（不重复上传文件浪费内存）！



### 2.2，下载文件：

​	下载文件包括预览操作（只有特定格式的文件格式才支持预览操作），下载文件的操作频率相对较高需要考虑高并发与防止攻击的情况！

​	外部请求进入系统：

​	①先保存ip信息，校验是否是非法攻击；

​	②查询Redis中是否存在该数据，如果存在则直接下载并阅览值+1，退出；否则，进入pg库查询，查询出结果则直接下载并将该数据（小于5mb）刷新至Redis；

​	③Redis使用caffeine高性能缓存进行热点数据操作！



## 3，实现难点







## 4，web接口说明





## 5，细节



### 5.1，flyway

​	base是数据库表修改目录、patch是数据修改目录
